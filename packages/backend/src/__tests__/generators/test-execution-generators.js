"use strict";
/**
 * Fast-check generators for test execution data
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.completedTestExecutionGenerator = exports.executionMessageGenerator = exports.testExecutionGenerator = exports.stepResultGenerator = exports.testCaseGenerator = exports.testStepGenerator = exports.stepStatusGenerator = exports.executionResultGenerator = exports.executionStatusGenerator = void 0;
const fc = __importStar(require("fast-check"));
// Generator for execution status
const executionStatusGenerator = () => fc.constantFrom('queued', 'running', 'completed', 'error');
exports.executionStatusGenerator = executionStatusGenerator;
// Generator for execution result
const executionResultGenerator = () => fc.constantFrom('pass', 'fail', 'error');
exports.executionResultGenerator = executionResultGenerator;
// Generator for step status
const stepStatusGenerator = () => fc.constantFrom('pass', 'fail', 'error');
exports.stepStatusGenerator = stepStatusGenerator;
// Generator for test step
const testStepGenerator = () => fc.record({
    stepNumber: fc.integer({ min: 1, max: 20 }),
    action: fc.constantFrom('navigate', 'click', 'type', 'assert', 'wait', 'api-call'),
    target: fc.string({ minLength: 1, maxLength: 200 }),
    value: fc.option(fc.string({ minLength: 0, maxLength: 500 }), { nil: undefined }),
    expectedResult: fc.option(fc.string({ minLength: 0, maxLength: 500 }), { nil: undefined }),
});
exports.testStepGenerator = testStepGenerator;
// Generator for test case
const testCaseGenerator = () => fc.record({
    testCaseId: fc.uuid(),
    suiteId: fc.uuid(),
    projectId: fc.uuid(),
    userId: fc.uuid(),
    name: fc.string({ minLength: 1, maxLength: 100 }),
    description: fc.string({ minLength: 0, maxLength: 500 }),
    type: fc.constantFrom('functional', 'ui', 'api', 'performance'),
    steps: fc.array((0, exports.testStepGenerator)(), { minLength: 1, maxLength: 10 }),
    priority: fc.constantFrom('high', 'medium', 'low'),
    tags: fc.array(fc.string({ minLength: 1, maxLength: 20 }), { maxLength: 5 }),
    createdAt: fc.integer({ min: 1600000000000, max: Date.now() }),
    updatedAt: fc.integer({ min: 1600000000000, max: Date.now() }),
});
exports.testCaseGenerator = testCaseGenerator;
// Generator for step result
const stepResultGenerator = () => fc.record({
    stepIndex: fc.integer({ min: 0, max: 19 }),
    action: fc.constantFrom('navigate', 'click', 'type', 'assert', 'wait', 'api-call'),
    status: (0, exports.stepStatusGenerator)(),
    duration: fc.integer({ min: 10, max: 30000 }),
    errorMessage: fc.option(fc.string({ minLength: 0, maxLength: 500 }), { nil: undefined }),
    screenshot: fc.constant(undefined), // Screenshots are assigned at execution level
    details: fc.option(fc.record({
        url: fc.option(fc.webUrl(), { nil: undefined }),
        selector: fc.option(fc.string({ minLength: 1, maxLength: 100 }), { nil: undefined }),
        value: fc.option(fc.string({ minLength: 0, maxLength: 200 }), { nil: undefined }),
        assertion: fc.option(fc.string({ minLength: 0, maxLength: 200 }), { nil: undefined }),
    }), { nil: undefined }),
});
exports.stepResultGenerator = stepResultGenerator;
// Generator for test execution
const testExecutionGenerator = () => fc.record({
    executionId: fc.uuid(),
    projectId: fc.uuid(),
    testCaseId: fc.option(fc.uuid(), { nil: undefined }),
    testSuiteId: fc.option(fc.uuid(), { nil: undefined }),
    suiteExecutionId: fc.option(fc.uuid(), { nil: undefined }),
    status: (0, exports.executionStatusGenerator)(),
    result: fc.option((0, exports.executionResultGenerator)(), { nil: undefined }),
    startTime: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
    endTime: fc.option(fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()), { nil: undefined }),
    duration: fc.option(fc.integer({ min: 100, max: 600000 }), { nil: undefined }),
    steps: fc.array((0, exports.stepResultGenerator)(), { minLength: 0, maxLength: 10 }),
    errorMessage: fc.option(fc.string({ minLength: 0, maxLength: 500 }), { nil: undefined }),
    metadata: fc.record({
        triggeredBy: fc.uuid(),
        environment: fc.option(fc.constantFrom('test', 'staging', 'production'), { nil: undefined }),
        browserVersion: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: undefined }),
    }),
    createdAt: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
    updatedAt: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
}).chain(execution => {
    // Generate screenshots based on failed steps
    const failedSteps = execution.steps.filter(s => s.status === 'fail' || s.status === 'error');
    const screenshotsArbitrary = failedSteps.length > 0
        ? fc.array(fc.uuid().map(id => `screenshots/${execution.executionId}/${id}.png`), { minLength: 0, maxLength: failedSteps.length })
        : fc.constant([]);
    return screenshotsArbitrary.map(screenshots => {
        // Assign screenshots to failed steps
        let screenshotIndex = 0;
        const stepsWithScreenshots = execution.steps.map(step => {
            if ((step.status === 'fail' || step.status === 'error') && screenshotIndex < screenshots.length) {
                return { ...step, screenshot: screenshots[screenshotIndex++] };
            }
            return step;
        });
        // Ensure completed executions have result, endTime, and duration
        if (execution.status === 'completed') {
            const duration = execution.duration || 5000;
            return {
                ...execution,
                steps: stepsWithScreenshots,
                screenshots: [...screenshots],
                result: execution.result || 'pass',
                duration,
                endTime: new Date(new Date(execution.startTime).getTime() + duration).toISOString(),
            };
        }
        return {
            ...execution,
            steps: stepsWithScreenshots,
            screenshots: [...screenshots],
        };
    });
});
exports.testExecutionGenerator = testExecutionGenerator;
// Generator for execution message (SQS)
const executionMessageGenerator = () => fc.record({
    executionId: fc.uuid(),
    testCaseId: fc.uuid(),
    projectId: fc.uuid(),
    suiteExecutionId: fc.option(fc.uuid(), { nil: undefined }),
    testCase: (0, exports.testCaseGenerator)(),
    metadata: fc.record({
        triggeredBy: fc.uuid(),
        environment: fc.option(fc.constantFrom('test', 'staging', 'production'), { nil: undefined }),
    }),
});
exports.executionMessageGenerator = executionMessageGenerator;
// Generator for completed test execution (with result and endTime)
const completedTestExecutionGenerator = () => fc.record({
    executionId: fc.uuid(),
    projectId: fc.uuid(),
    testCaseId: fc.option(fc.uuid(), { nil: undefined }),
    testSuiteId: fc.option(fc.uuid(), { nil: undefined }),
    suiteExecutionId: fc.option(fc.uuid(), { nil: undefined }),
    status: fc.constant('completed'),
    result: (0, exports.executionResultGenerator)(),
    startTime: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
    duration: fc.integer({ min: 100, max: 600000 }),
    steps: fc.array((0, exports.stepResultGenerator)(), { minLength: 0, maxLength: 10 }),
    errorMessage: fc.option(fc.string({ minLength: 0, maxLength: 500 }), { nil: undefined }),
    metadata: fc.record({
        triggeredBy: fc.uuid(),
        environment: fc.option(fc.constantFrom('test', 'staging', 'production'), { nil: undefined }),
        browserVersion: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: undefined }),
    }),
    createdAt: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
    updatedAt: fc.integer({ min: new Date('2024-01-01').getTime(), max: Date.now() }).map(t => new Date(t).toISOString()),
}).chain(execution => {
    // Generate screenshots based on failed steps
    const failedSteps = execution.steps.filter(s => s.status === 'fail' || s.status === 'error');
    const screenshotsArbitrary = failedSteps.length > 0
        ? fc.array(fc.uuid().map(id => `screenshots/${execution.executionId}/${id}.png`), { minLength: 0, maxLength: failedSteps.length })
        : fc.constant([]);
    return screenshotsArbitrary.map(screenshots => {
        // Assign screenshots to failed steps
        let screenshotIndex = 0;
        const stepsWithScreenshots = execution.steps.map(step => {
            if ((step.status === 'fail' || step.status === 'error') && screenshotIndex < screenshots.length) {
                return { ...step, screenshot: screenshots[screenshotIndex++] };
            }
            return step;
        });
        return {
            ...execution,
            steps: stepsWithScreenshots,
            screenshots: [...screenshots],
            endTime: new Date(new Date(execution.startTime).getTime() + execution.duration).toISOString(),
        };
    });
});
exports.completedTestExecutionGenerator = completedTestExecutionGenerator;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC1leGVjdXRpb24tZ2VuZXJhdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlc3QtZXhlY3V0aW9uLWdlbmVyYXRvcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCwrQ0FBaUM7QUFXakMsaUNBQWlDO0FBQzFCLE1BQU0sd0JBQXdCLEdBQUcsR0FBa0MsRUFBRSxDQUMxRSxFQUFFLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBRGhELFFBQUEsd0JBQXdCLDRCQUN3QjtBQUU3RCxpQ0FBaUM7QUFDMUIsTUFBTSx3QkFBd0IsR0FBRyxHQUFrQyxFQUFFLENBQzFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUQ5QixRQUFBLHdCQUF3Qiw0QkFDTTtBQUUzQyw0QkFBNEI7QUFDckIsTUFBTSxtQkFBbUIsR0FBRyxHQUE2QixFQUFFLENBQ2hFLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUQ5QixRQUFBLG1CQUFtQix1QkFDVztBQUUzQywwQkFBMEI7QUFDbkIsTUFBTSxpQkFBaUIsR0FBRyxHQUEyQixFQUFFLENBQzVELEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDUixVQUFVLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQzNDLE1BQU0sRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDO0lBQ2xGLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsU0FBUyxF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QUFDLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FDaEQ7UUFDSCxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFjLENBQUMsQ0FBQztJQUVoQyxPQUFPLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsRUFBRTtRQUM1QyxxQ0FBcUM7UUFDckMsSUFBSSxlQUFlLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLE1BQU0sb0JBQW9CLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssT0FBTyxDQUFDLElBQUksZUFBZSxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDaEcsT0FBTyxFQUFFLEdBQUcsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsZUFBZSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2pFLENBQUM7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTztZQUNMLEdBQUcsU0FBUztZQUNaLEtBQUssRUFBRSxvQkFBb0I7WUFDM0IsV0FBVyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUM7WUFDN0IsT0FBTyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsV0FBVyxFQUFFO1NBQzlGLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBL0NRLFFBQUEsK0JBQStCLG1DQStDdkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRmFzdC1jaGVjayBnZW5lcmF0b3JzIGZvciB0ZXN0IGV4ZWN1dGlvbiBkYXRhXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgZmMgZnJvbSAnZmFzdC1jaGVjayc7XHJcbmltcG9ydCB7XHJcbiAgVGVzdEV4ZWN1dGlvbixcclxuICBFeGVjdXRpb25TdGF0dXMsXHJcbiAgRXhlY3V0aW9uUmVzdWx0LFxyXG4gIFN0ZXBSZXN1bHQsXHJcbiAgU3RlcFN0YXR1cyxcclxuICBFeGVjdXRpb25NZXNzYWdlLFxyXG59IGZyb20gJy4uLy4uL3R5cGVzL3Rlc3QtZXhlY3V0aW9uJztcclxuaW1wb3J0IHsgVGVzdENhc2UsIFRlc3RTdGVwIH0gZnJvbSAnLi4vLi4vdHlwZXMvdGVzdC1jYXNlJztcclxuXHJcbi8vIEdlbmVyYXRvciBmb3IgZXhlY3V0aW9uIHN0YXR1c1xyXG5leHBvcnQgY29uc3QgZXhlY3V0aW9uU3RhdHVzR2VuZXJhdG9yID0gKCk6IGZjLkFyYml0cmFyeTxFeGVjdXRpb25TdGF0dXM+ID0+XHJcbiAgZmMuY29uc3RhbnRGcm9tKCdxdWV1ZWQnLCAncnVubmluZycsICdjb21wbGV0ZWQnLCAnZXJyb3InKTtcclxuXHJcbi8vIEdlbmVyYXRvciBmb3IgZXhlY3V0aW9uIHJlc3VsdFxyXG5leHBvcnQgY29uc3QgZXhlY3V0aW9uUmVzdWx0R2VuZXJhdG9yID0gKCk6IGZjLkFyYml0cmFyeTxFeGVjdXRpb25SZXN1bHQ+ID0+XHJcbiAgZmMuY29uc3RhbnRGcm9tKCdwYXNzJywgJ2ZhaWwnLCAnZXJyb3InKTtcclxuXHJcbi8vIEdlbmVyYXRvciBmb3Igc3RlcCBzdGF0dXNcclxuZXhwb3J0IGNvbnN0IHN0ZXBTdGF0dXNHZW5lcmF0b3IgPSAoKTogZmMuQXJiaXRyYXJ5PFN0ZXBTdGF0dXM+ID0+XHJcbiAgZmMuY29uc3RhbnRGcm9tKCdwYXNzJywgJ2ZhaWwnLCAnZXJyb3InKTtcclxuXHJcbi8vIEdlbmVyYXRvciBmb3IgdGVzdCBzdGVwXHJcbmV4cG9ydCBjb25zdCB0ZXN0U3RlcEdlbmVyYXRvciA9ICgpOiBmYy5BcmJpdHJhcnk8VGVzdFN0ZXA+ID0+XHJcbiAgZmMucmVjb3JkKHtcclxuICAgIHN0ZXBOdW1iZXI6IGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogMjAgfSksXHJcbiAgICBhY3Rpb246IGZjLmNvbnN0YW50RnJvbSgnbmF2aWdhdGUnLCAnY2xpY2snLCAndHlwZScsICdhc3NlcnQnLCAnd2FpdCcsICdhcGktY2FsbCcpLFxyXG4gICAgdGFyZ2V0OiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pLFxyXG4gICAgdmFsdWU6IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogNTAwIH0pLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxyXG4gICAgZXhwZWN0ZWRSZXN1bHQ6IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogNTAwIH0pLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxyXG4gIH0pO1xyXG5cclxuLy8gR2VuZXJhdG9yIGZvciB0ZXN0IGNhc2VcclxuZXhwb3J0IGNvbnN0IHRlc3RDYXNlR2VuZXJhdG9yID0gKCk6IGZjLkFyYml0cmFyeTxUZXN0Q2FzZT4gPT5cclxuICBmYy5yZWNvcmQoe1xyXG4gICAgdGVzdENhc2VJZDogZmMudXVpZCgpLFxyXG4gICAgc3VpdGVJZDogZmMudXVpZCgpLFxyXG4gICAgcHJvamVjdElkOiBmYy51dWlkKCksXHJcbiAgICB1c2VySWQ6IGZjLnV1aWQoKSxcclxuICAgIG5hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXHJcbiAgICBkZXNjcmlwdGlvbjogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDUwMCB9KSxcclxuICAgIHR5cGU6IGZjLmNvbnN0YW50RnJvbSgnZnVuY3Rpb25hbCcsICd1aScsICdhcGknLCAncGVyZm9ybWFuY2UnKSxcclxuICAgIHN0ZXBzOiBmYy5hcnJheSh0ZXN0U3RlcEdlbmVyYXRvcigpLCB7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMCB9KSxcclxuICAgIHByaW9yaXR5OiBmYy5jb25zdGFudEZyb20oJ2hpZ2gnLCAnbWVkaXVtJywgJ2xvdycpLFxyXG4gICAgdGFnczogZmMuYXJyYXkoZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLCB7IG1heExlbmd0aDogNSB9KSxcclxuICAgIGNyZWF0ZWRBdDogZmMuaW50ZWdlcih7IG1pbjogMTYwMDAwMDAwMDAwMCwgbWF4OiBEYXRlLm5vdygpIH0pLFxyXG4gICAgdXBkYXRlZEF0OiBmYy5pbnRlZ2VyKHsgbWluOiAxNjAwMDAwMDAwMDAwLCBtYXg6IERhdGUubm93KCkgfSksXHJcbiAgfSk7XHJcblxyXG4vLyBHZW5lcmF0b3IgZm9yIHN0ZXAgcmVzdWx0XHJcbmV4cG9ydCBjb25zdCBzdGVwUmVzdWx0R2VuZXJhdG9yID0gKCk6IGZjLkFyYml0cmFyeTxTdGVwUmVzdWx0PiA9PlxyXG4gIGZjLnJlY29yZCh7XHJcbiAgICBzdGVwSW5kZXg6IGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTkgfSksXHJcbiAgICBhY3Rpb246IGZjLmNvbnN0YW50RnJvbSgnbmF2aWdhdGUnLCAnY2xpY2snLCAndHlwZScsICdhc3NlcnQnLCAnd2FpdCcsICdhcGktY2FsbCcpLFxyXG4gICAgc3RhdHVzOiBzdGVwU3RhdHVzR2VuZXJhdG9yKCksXHJcbiAgICBkdXJhdGlvbjogZmMuaW50ZWdlcih7IG1pbjogMTAsIG1heDogMzAwMDAgfSksXHJcbiAgICBlcnJvck1lc3NhZ2U6IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogNTAwIH0pLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxyXG4gICAgc2NyZWVuc2hvdDogZmMuY29uc3RhbnQodW5kZWZpbmVkKSwgLy8gU2NyZWVuc2hvdHMgYXJlIGFzc2lnbmVkIGF0IGV4ZWN1dGlvbiBsZXZlbFxyXG4gICAgZGV0YWlsczogZmMub3B0aW9uKFxyXG4gICAgICBmYy5yZWNvcmQoe1xyXG4gICAgICAgIHVybDogZmMub3B0aW9uKGZjLndlYlVybCgpLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxyXG4gICAgICAgIHNlbGVjdG9yOiBmYy5vcHRpb24oZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDEwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgICAgICB2YWx1ZTogZmMub3B0aW9uKGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMCwgbWF4TGVuZ3RoOiAyMDAgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICAgICAgYXNzZXJ0aW9uOiBmYy5vcHRpb24oZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDIwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgICAgfSksXHJcbiAgICAgIHsgbmlsOiB1bmRlZmluZWQgfVxyXG4gICAgKSxcclxuICB9KTtcclxuXHJcbi8vIEdlbmVyYXRvciBmb3IgdGVzdCBleGVjdXRpb25cclxuZXhwb3J0IGNvbnN0IHRlc3RFeGVjdXRpb25HZW5lcmF0b3IgPSAoKTogZmMuQXJiaXRyYXJ5PFRlc3RFeGVjdXRpb24+ID0+XHJcbiAgZmMucmVjb3JkKHtcclxuICAgIGV4ZWN1dGlvbklkOiBmYy51dWlkKCksXHJcbiAgICBwcm9qZWN0SWQ6IGZjLnV1aWQoKSxcclxuICAgIHRlc3RDYXNlSWQ6IGZjLm9wdGlvbihmYy51dWlkKCksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICB0ZXN0U3VpdGVJZDogZmMub3B0aW9uKGZjLnV1aWQoKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIHN1aXRlRXhlY3V0aW9uSWQ6IGZjLm9wdGlvbihmYy51dWlkKCksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICBzdGF0dXM6IGV4ZWN1dGlvblN0YXR1c0dlbmVyYXRvcigpLFxyXG4gICAgcmVzdWx0OiBmYy5vcHRpb24oZXhlY3V0aW9uUmVzdWx0R2VuZXJhdG9yKCksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICBzdGFydFRpbWU6IGZjLmludGVnZXIoeyBtaW46IG5ldyBEYXRlKCcyMDI0LTAxLTAxJykuZ2V0VGltZSgpLCBtYXg6IERhdGUubm93KCkgfSkubWFwKHQgPT4gbmV3IERhdGUodCkudG9JU09TdHJpbmcoKSksXHJcbiAgICBlbmRUaW1lOiBmYy5vcHRpb24oXHJcbiAgICAgIGZjLmludGVnZXIoeyBtaW46IG5ldyBEYXRlKCcyMDI0LTAxLTAxJykuZ2V0VGltZSgpLCBtYXg6IERhdGUubm93KCkgfSkubWFwKHQgPT4gbmV3IERhdGUodCkudG9JU09TdHJpbmcoKSksXHJcbiAgICAgIHsgbmlsOiB1bmRlZmluZWQgfVxyXG4gICAgKSxcclxuICAgIGR1cmF0aW9uOiBmYy5vcHRpb24oZmMuaW50ZWdlcih7IG1pbjogMTAwLCBtYXg6IDYwMDAwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIHN0ZXBzOiBmYy5hcnJheShzdGVwUmVzdWx0R2VuZXJhdG9yKCksIHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDEwIH0pLFxyXG4gICAgZXJyb3JNZXNzYWdlOiBmYy5vcHRpb24oZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDUwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIG1ldGFkYXRhOiBmYy5yZWNvcmQoe1xyXG4gICAgICB0cmlnZ2VyZWRCeTogZmMudXVpZCgpLFxyXG4gICAgICBlbnZpcm9ubWVudDogZmMub3B0aW9uKGZjLmNvbnN0YW50RnJvbSgndGVzdCcsICdzdGFnaW5nJywgJ3Byb2R1Y3Rpb24nKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgICAgYnJvd3NlclZlcnNpb246IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICB9KSxcclxuICAgIGNyZWF0ZWRBdDogZmMuaW50ZWdlcih7IG1pbjogbmV3IERhdGUoJzIwMjQtMDEtMDEnKS5nZXRUaW1lKCksIG1heDogRGF0ZS5ub3coKSB9KS5tYXAodCA9PiBuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpKSxcclxuICAgIHVwZGF0ZWRBdDogZmMuaW50ZWdlcih7IG1pbjogbmV3IERhdGUoJzIwMjQtMDEtMDEnKS5nZXRUaW1lKCksIG1heDogRGF0ZS5ub3coKSB9KS5tYXAodCA9PiBuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpKSxcclxuICB9KS5jaGFpbihleGVjdXRpb24gPT4ge1xyXG4gICAgLy8gR2VuZXJhdGUgc2NyZWVuc2hvdHMgYmFzZWQgb24gZmFpbGVkIHN0ZXBzXHJcbiAgICBjb25zdCBmYWlsZWRTdGVwcyA9IGV4ZWN1dGlvbi5zdGVwcy5maWx0ZXIocyA9PiBzLnN0YXR1cyA9PT0gJ2ZhaWwnIHx8IHMuc3RhdHVzID09PSAnZXJyb3InKTtcclxuICAgIGNvbnN0IHNjcmVlbnNob3RzQXJiaXRyYXJ5ID0gZmFpbGVkU3RlcHMubGVuZ3RoID4gMFxyXG4gICAgICA/IGZjLmFycmF5KFxyXG4gICAgICAgICAgZmMudXVpZCgpLm1hcChpZCA9PiBgc2NyZWVuc2hvdHMvJHtleGVjdXRpb24uZXhlY3V0aW9uSWR9LyR7aWR9LnBuZ2ApLFxyXG4gICAgICAgICAgeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogZmFpbGVkU3RlcHMubGVuZ3RoIH1cclxuICAgICAgICApXHJcbiAgICAgIDogZmMuY29uc3RhbnQoW10gYXMgc3RyaW5nW10pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gc2NyZWVuc2hvdHNBcmJpdHJhcnkubWFwKHNjcmVlbnNob3RzID0+IHtcclxuICAgICAgLy8gQXNzaWduIHNjcmVlbnNob3RzIHRvIGZhaWxlZCBzdGVwc1xyXG4gICAgICBsZXQgc2NyZWVuc2hvdEluZGV4ID0gMDtcclxuICAgICAgY29uc3Qgc3RlcHNXaXRoU2NyZWVuc2hvdHMgPSBleGVjdXRpb24uc3RlcHMubWFwKHN0ZXAgPT4ge1xyXG4gICAgICAgIGlmICgoc3RlcC5zdGF0dXMgPT09ICdmYWlsJyB8fCBzdGVwLnN0YXR1cyA9PT0gJ2Vycm9yJykgJiYgc2NyZWVuc2hvdEluZGV4IDwgc2NyZWVuc2hvdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm4geyAuLi5zdGVwLCBzY3JlZW5zaG90OiBzY3JlZW5zaG90c1tzY3JlZW5zaG90SW5kZXgrK10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ZXA7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gRW5zdXJlIGNvbXBsZXRlZCBleGVjdXRpb25zIGhhdmUgcmVzdWx0LCBlbmRUaW1lLCBhbmQgZHVyYXRpb25cclxuICAgICAgaWYgKGV4ZWN1dGlvbi5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBleGVjdXRpb24uZHVyYXRpb24gfHwgNTAwMDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uZXhlY3V0aW9uLFxyXG4gICAgICAgICAgc3RlcHM6IHN0ZXBzV2l0aFNjcmVlbnNob3RzLFxyXG4gICAgICAgICAgc2NyZWVuc2hvdHM6IFsuLi5zY3JlZW5zaG90c10sXHJcbiAgICAgICAgICByZXN1bHQ6IGV4ZWN1dGlvbi5yZXN1bHQgfHwgJ3Bhc3MnLFxyXG4gICAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZShuZXcgRGF0ZShleGVjdXRpb24uc3RhcnRUaW1lKS5nZXRUaW1lKCkgKyBkdXJhdGlvbikudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLmV4ZWN1dGlvbixcclxuICAgICAgICBzdGVwczogc3RlcHNXaXRoU2NyZWVuc2hvdHMsXHJcbiAgICAgICAgc2NyZWVuc2hvdHM6IFsuLi5zY3JlZW5zaG90c10sXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbi8vIEdlbmVyYXRvciBmb3IgZXhlY3V0aW9uIG1lc3NhZ2UgKFNRUylcclxuZXhwb3J0IGNvbnN0IGV4ZWN1dGlvbk1lc3NhZ2VHZW5lcmF0b3IgPSAoKTogZmMuQXJiaXRyYXJ5PEV4ZWN1dGlvbk1lc3NhZ2U+ID0+XHJcbiAgZmMucmVjb3JkKHtcclxuICAgIGV4ZWN1dGlvbklkOiBmYy51dWlkKCksXHJcbiAgICB0ZXN0Q2FzZUlkOiBmYy51dWlkKCksXHJcbiAgICBwcm9qZWN0SWQ6IGZjLnV1aWQoKSxcclxuICAgIHN1aXRlRXhlY3V0aW9uSWQ6IGZjLm9wdGlvbihmYy51dWlkKCksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICB0ZXN0Q2FzZTogdGVzdENhc2VHZW5lcmF0b3IoKSxcclxuICAgIG1ldGFkYXRhOiBmYy5yZWNvcmQoe1xyXG4gICAgICB0cmlnZ2VyZWRCeTogZmMudXVpZCgpLFxyXG4gICAgICBlbnZpcm9ubWVudDogZmMub3B0aW9uKGZjLmNvbnN0YW50RnJvbSgndGVzdCcsICdzdGFnaW5nJywgJ3Byb2R1Y3Rpb24nKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIH0pLFxyXG4gIH0pO1xyXG5cclxuLy8gR2VuZXJhdG9yIGZvciBjb21wbGV0ZWQgdGVzdCBleGVjdXRpb24gKHdpdGggcmVzdWx0IGFuZCBlbmRUaW1lKVxyXG5leHBvcnQgY29uc3QgY29tcGxldGVkVGVzdEV4ZWN1dGlvbkdlbmVyYXRvciA9ICgpOiBmYy5BcmJpdHJhcnk8VGVzdEV4ZWN1dGlvbj4gPT5cclxuICBmYy5yZWNvcmQoe1xyXG4gICAgZXhlY3V0aW9uSWQ6IGZjLnV1aWQoKSxcclxuICAgIHByb2plY3RJZDogZmMudXVpZCgpLFxyXG4gICAgdGVzdENhc2VJZDogZmMub3B0aW9uKGZjLnV1aWQoKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIHRlc3RTdWl0ZUlkOiBmYy5vcHRpb24oZmMudXVpZCgpLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxyXG4gICAgc3VpdGVFeGVjdXRpb25JZDogZmMub3B0aW9uKGZjLnV1aWQoKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIHN0YXR1czogZmMuY29uc3RhbnQoJ2NvbXBsZXRlZCcgYXMgRXhlY3V0aW9uU3RhdHVzKSxcclxuICAgIHJlc3VsdDogZXhlY3V0aW9uUmVzdWx0R2VuZXJhdG9yKCksXHJcbiAgICBzdGFydFRpbWU6IGZjLmludGVnZXIoeyBtaW46IG5ldyBEYXRlKCcyMDI0LTAxLTAxJykuZ2V0VGltZSgpLCBtYXg6IERhdGUubm93KCkgfSkubWFwKHQgPT4gbmV3IERhdGUodCkudG9JU09TdHJpbmcoKSksXHJcbiAgICBkdXJhdGlvbjogZmMuaW50ZWdlcih7IG1pbjogMTAwLCBtYXg6IDYwMDAwMCB9KSxcclxuICAgIHN0ZXBzOiBmYy5hcnJheShzdGVwUmVzdWx0R2VuZXJhdG9yKCksIHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDEwIH0pLFxyXG4gICAgZXJyb3JNZXNzYWdlOiBmYy5vcHRpb24oZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDUwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgIG1ldGFkYXRhOiBmYy5yZWNvcmQoe1xyXG4gICAgICB0cmlnZ2VyZWRCeTogZmMudXVpZCgpLFxyXG4gICAgICBlbnZpcm9ubWVudDogZmMub3B0aW9uKGZjLmNvbnN0YW50RnJvbSgndGVzdCcsICdzdGFnaW5nJywgJ3Byb2R1Y3Rpb24nKSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcclxuICAgICAgYnJvd3NlclZlcnNpb246IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXHJcbiAgICB9KSxcclxuICAgIGNyZWF0ZWRBdDogZmMuaW50ZWdlcih7IG1pbjogbmV3IERhdGUoJzIwMjQtMDEtMDEnKS5nZXRUaW1lKCksIG1heDogRGF0ZS5ub3coKSB9KS5tYXAodCA9PiBuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpKSxcclxuICAgIHVwZGF0ZWRBdDogZmMuaW50ZWdlcih7IG1pbjogbmV3IERhdGUoJzIwMjQtMDEtMDEnKS5nZXRUaW1lKCksIG1heDogRGF0ZS5ub3coKSB9KS5tYXAodCA9PiBuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpKSxcclxuICB9KS5jaGFpbihleGVjdXRpb24gPT4ge1xyXG4gICAgLy8gR2VuZXJhdGUgc2NyZWVuc2hvdHMgYmFzZWQgb24gZmFpbGVkIHN0ZXBzXHJcbiAgICBjb25zdCBmYWlsZWRTdGVwcyA9IGV4ZWN1dGlvbi5zdGVwcy5maWx0ZXIocyA9PiBzLnN0YXR1cyA9PT0gJ2ZhaWwnIHx8IHMuc3RhdHVzID09PSAnZXJyb3InKTtcclxuICAgIGNvbnN0IHNjcmVlbnNob3RzQXJiaXRyYXJ5ID0gZmFpbGVkU3RlcHMubGVuZ3RoID4gMFxyXG4gICAgICA/IGZjLmFycmF5KFxyXG4gICAgICAgICAgZmMudXVpZCgpLm1hcChpZCA9PiBgc2NyZWVuc2hvdHMvJHtleGVjdXRpb24uZXhlY3V0aW9uSWR9LyR7aWR9LnBuZ2ApLFxyXG4gICAgICAgICAgeyBtaW5MZW5ndGg6IDAsIG1heExlbmd0aDogZmFpbGVkU3RlcHMubGVuZ3RoIH1cclxuICAgICAgICApXHJcbiAgICAgIDogZmMuY29uc3RhbnQoW10gYXMgc3RyaW5nW10pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gc2NyZWVuc2hvdHNBcmJpdHJhcnkubWFwKHNjcmVlbnNob3RzID0+IHtcclxuICAgICAgLy8gQXNzaWduIHNjcmVlbnNob3RzIHRvIGZhaWxlZCBzdGVwc1xyXG4gICAgICBsZXQgc2NyZWVuc2hvdEluZGV4ID0gMDtcclxuICAgICAgY29uc3Qgc3RlcHNXaXRoU2NyZWVuc2hvdHMgPSBleGVjdXRpb24uc3RlcHMubWFwKHN0ZXAgPT4ge1xyXG4gICAgICAgIGlmICgoc3RlcC5zdGF0dXMgPT09ICdmYWlsJyB8fCBzdGVwLnN0YXR1cyA9PT0gJ2Vycm9yJykgJiYgc2NyZWVuc2hvdEluZGV4IDwgc2NyZWVuc2hvdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm4geyAuLi5zdGVwLCBzY3JlZW5zaG90OiBzY3JlZW5zaG90c1tzY3JlZW5zaG90SW5kZXgrK10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0ZXA7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5leGVjdXRpb24sXHJcbiAgICAgICAgc3RlcHM6IHN0ZXBzV2l0aFNjcmVlbnNob3RzLFxyXG4gICAgICAgIHNjcmVlbnNob3RzOiBbLi4uc2NyZWVuc2hvdHNdLFxyXG4gICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKG5ldyBEYXRlKGV4ZWN1dGlvbi5zdGFydFRpbWUpLmdldFRpbWUoKSArIGV4ZWN1dGlvbi5kdXJhdGlvbikudG9JU09TdHJpbmcoKSxcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4iXX0=